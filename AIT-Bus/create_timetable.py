import csv
from datetime import datetime, timedelta
from collections import defaultdict

csv_data = """
2025-4-1,C
2025-4-2,C
2025-4-3,A
2025-4-4,A
2025-4-5,
2025-4-6,
2025-4-7,A
2025-4-8,A
2025-4-9,A
2025-4-10,A
2025-4-11,A
2025-4-12,
2025-4-13,
2025-4-14,A
2025-4-15,A
2025-4-16,A
2025-4-17,A
2025-4-18,A
2025-4-19,
2025-4-20,
2025-4-21,A
2025-4-22,A
2025-4-23,A
2025-4-24,A
2025-4-25,A
2025-4-26,
2025-4-27,
2025-4-28,A
2025-4-29,A
2025-4-30,A
2025-5-1,
2025-5-2,
2025-5-3,
2025-5-4,
2025-5-5,
2025-5-6,
2025-5-7,A
2025-5-8,A
2025-5-9,A
2025-5-10,
2025-5-11,
2025-5-12,A
2025-5-13,A
2025-5-14,A
2025-5-15,A
2025-5-16,A
2025-5-17,
2025-5-18,
2025-5-19,A
2025-5-20,A
2025-5-21,A
2025-5-22,A
2025-5-23,A
2025-5-24,
2025-5-25,
2025-5-26,A
2025-5-27,A
2025-5-28,A
2025-5-29,A
2025-5-30,A
2025-5-31,
2025-6-1,
2025-6-2,A
2025-6-3,A
2025-6-4,A
2025-6-5,A
2025-6-6,A
2025-6-7,A
2025-6-8,
2025-6-9,A
2025-6-10,A
2025-6-11,A
2025-6-12,A
2025-6-13,A
2025-6-14,
2025-6-15,
2025-6-16,A
2025-6-17,A
2025-6-18,A
2025-6-19,A
2025-6-20,A
2025-6-21,
2025-6-22,
2025-6-23,A
2025-6-24,A
2025-6-25,A
2025-6-26,A
2025-6-27,A
2025-6-28,
2025-6-29,
2025-6-30,A
2025-7-1,A
2025-7-2,A
2025-7-3,A
2025-7-4,A
2025-7-5,
2025-7-6,
2025-7-7,A
2025-7-8,A
2025-7-9,A
2025-7-10,A
2025-7-11,A
2025-7-12,A
2025-7-13,A
2025-7-14,A
2025-7-15,A
2025-7-16,A
2025-7-17,A
2025-7-18,A
2025-7-19,
2025-7-20,
2025-7-21,A
2025-7-22,A
2025-7-23,A
2025-7-24,A
2025-7-25,A
2025-7-26,A
2025-7-27,A
2025-7-28,A
2025-7-29,A
2025-7-30,A
2025-7-31,A
2025-8-1,A
2025-8-2,
2025-8-3,
2025-8-4,A
2025-8-5,A
2025-8-6,A
2025-8-7,C
2025-8-8,C
2025-8-9,
2025-8-10,
2025-8-11,
2025-8-12,
2025-8-13,
2025-8-14,
2025-8-15,
2025-8-16,
2025-8-17,
2025-8-18,C
2025-8-19,C
2025-8-20,C
2025-8-21,C
2025-8-22,C
2025-8-23,
2025-8-24,
2025-8-25,C
2025-8-26,C
2025-8-27,C
2025-8-28,C
2025-8-29,C
2025-8-30,
2025-8-31,
2025-9-1,C
2025-9-2,C
2025-9-3,C
2025-9-4,C
2025-9-5,C
2025-9-6,
2025-9-7,
2025-9-8,C
2025-9-9,C
2025-9-10,C
2025-9-11,C
2025-9-12,C
2025-9-13,
2025-9-14,
2025-9-15,
2025-9-16,C
2025-9-17,C
2025-9-18,A
2025-9-19,B
2025-9-20,
2025-9-21,
2025-9-22,A
2025-9-23,
2025-9-24,A
2025-9-25,A
2025-9-26,A
2025-9-27,
2025-9-28,
2025-9-29,A
2025-9-30,A
2025-10-1,A
2025-10-2,A
2025-10-3,A
2025-10-4,
2025-10-5,
2025-10-6,A
2025-10-7,A
2025-10-8,A
2025-10-9,B
2025-10-10,B
2025-10-11,A
2025-10-12,A
2025-10-13,
2025-10-14,A
2025-10-15,A
2025-10-16,A
2025-10-17,A
2025-10-18,A
2025-10-19,
2025-10-20,A
2025-10-21,A
2025-10-22,A
2025-10-23,A
2025-10-24,A
2025-10-25,A
2025-10-26,A
2025-10-27,A
2025-10-28,A
2025-10-29,A
2025-10-30,A
2025-10-31,B
2025-11-1,A
2025-11-2,A
2025-11-3,A
2025-11-4,A
2025-11-5,A
2025-11-6,A
2025-11-7,A
2025-11-8,A
2025-11-9,A
2025-11-10,A
2025-11-11,A
2025-11-12,A
2025-11-13,
2025-11-14,A
2025-11-15,A
2025-11-16,
2025-11-17,A
2025-11-18,A
2025-11-19,A
2025-11-20,A
2025-11-21,A
2025-11-22,A
2025-11-23,A
2025-11-24,A
2025-11-25,A
2025-11-26,A
2025-11-27,A
2025-11-28,A
2025-11-29,A
2025-11-30,A
2025-12-1,A
2025-12-2,A
2025-12-3,A
2025-12-4,A
2025-12-5,A
2025-12-6,
2025-12-7,
2025-12-8,A
2025-12-9,A
2025-12-10,A
2025-12-11,A
2025-12-12,A
2025-12-13,A
2025-12-14,
2025-12-15,A
2025-12-16,A
2025-12-17,A
2025-12-18,A
2025-12-19,A
2025-12-20,
2025-12-21,
2025-12-22,A
2025-12-23,A
2025-12-24,A
2025-12-25,A
2025-12-26,
2025-12-27,
2025-12-28,
2025-12-29,
2025-12-30,
2025-12-31,
2027-1-1,
2027-1-2,
2027-1-3,
2027-1-4,
2027-1-5,
2027-1-6,C
2027-1-7,C
2027-1-8,A
2027-1-9,A
2027-1-10,
2027-1-11,
2027-1-12,
2027-1-13,A
2027-1-14,A
2027-1-15,A
2027-1-16,A
2027-1-17,A
2027-1-18,A
2027-1-19,A
2027-1-20,A
2027-1-21,
2027-1-22,A
2027-1-23,A
2027-1-24,
2027-1-25,
2027-1-26,C
2027-1-27,A
2027-1-28,A
2027-1-29,A
2027-1-30,A
2027-1-31,
2027-2-1,
2027-2-2,A
2027-2-3,A
2027-2-4,A
2027-2-5,A
2027-2-6,A
2027-2-7,
2027-2-8,
2027-2-9,A
2027-2-10,C
2027-2-11,
2027-2-12,C
2027-2-13,C
2027-2-14,
2027-2-15,
2027-2-16,C
2027-2-17,C
2027-2-18,C
2027-2-19,C
2027-2-20,C
2027-2-21,
2027-2-22,
2027-2-23,
2027-2-24,C
2027-2-25,C
2027-2-26,C
2027-2-27,A
2027-2-28,
2027-3-1,
2027-3-2,C
2027-3-3,C
2027-3-4,A
2027-3-5,C
2027-3-6,C
2027-3-7,A
2027-3-8,A
2027-3-9,C
2027-3-10,C
2027-3-11,C
2027-3-12,C
2027-3-13,C
2027-3-14,
2027-3-15,
2027-3-16,C
2027-3-17,C
2027-3-18,C
2027-3-19,C
2027-3-20,
2027-3-21,
2027-3-22,
2027-3-23,A
2027-3-24,C
2027-3-25,C
2027-3-26,C
2027-3-27,C
2027-3-28,
2027-3-29,
2027-3-30,C
2027-3-31,C
"""

# CSVデータをパース
lines = csv_data.strip().split('\n')
reader = csv.reader(lines)
# header = next(reader)  # ヘッダー行をスキップ
data = [row for row in reader]

# 日付データを解析
date_mode_dict = {datetime.strptime(date, '%Y-%m-%d'): mode for date, mode in data}

# 年月ごとにデータを整理
calendar_data = defaultdict(list)
for date, mode in date_mode_dict.items():
    calendar_data[(date.year, date.month)].append((date.day, mode))

# HTMLカレンダーを生成
html_output = '<html><body>\n'
for (year, month), days in sorted(calendar_data.items()):
    html_output += f'<h2>{year}年{month}月</h2>\n'
    html_output += '<table border="1">\n'
    html_output += '  <tr>\n'
    html_output += '    <th>日</th>\n'
    html_output += '    <th>月</th>\n'
    html_output += '    <th>火</th>\n'
    html_output += '    <th>水</th>\n'
    html_output += '    <th>木</th>\n'
    html_output += '    <th>金</th>\n'
    html_output += '    <th>土</th>\n'
    html_output += '  </tr>\n'
    
    # 月初の日付を取得
    first_day = datetime(year, month, 1)
    start_day_of_week = first_day.weekday()  # 月曜日が0、日曜日が6
    
    # カレンダーの行を生成
    week = [''] * 7
    for _ in range((start_day_of_week + 1) % 7):
        week[_] = ''  # 最初の週の空白セルを追加
    
    for day, mode in days:
        current_date = datetime(year, month, day)
        if mode == "" or mode == " ":
            week[(current_date.weekday() + 1) % 7] = f'{day}日<br>なし'
        else:
            week[(current_date.weekday() + 1) % 7] = f'{day}日<br>{mode}'
        if (current_date.weekday() + 1) % 7 == 6:  # 土曜日で週が終わる
            html_output += '  <tr>\n'
            for day_content in week:
                html_output += f'    <td>{day_content}</td>\n'
            html_output += '  </tr>\n'
            week = [''] * 7
    
    # 最後の週を追加
    if any(week):
        html_output += '  <tr>\n'
        for day_content in week:
            html_output += f'    <td>{day_content}</td>\n'
        html_output += '  </tr>\n'
    
    html_output += '</table>\n'

html_output += '</body></html>'

print(html_output)